## It is recommended to have odd number of nodes in a cluster, otherwise the emqx cluster cannot be automatically healed in case of net-split.
replicaCount: 3

# Pod deployment policy
# value: OrderedReady | Parallel
# To redeploy a chart with existing PVC(s), the value must be set to Parallel to avoid deadlock
podManagementPolicy: Parallel

persistence:
  enabled: true
  size: 250Mi
  storageClassName: longhorn
  accessMode: ReadWriteOnce

resources:
  requests:
    cpu: 10m
    memory: 150Mi
  limits:
    memory: 512Mi

envFromSecret: emqx-basic-auth

# EMQX configuration
# https://hub.docker.com/r/emqx/emqx)
emqxConfig:
  EMQX_ALLOW_ANONYMOUS: "false"
  MQX_AUTH__MNESIA__PASSWORD_HASH: plain
  #Â Allow deletion of a previous values file key (null)
  # https://github.com/helm/helm/pull/2648
  EMQX_DASHBOARD__DEFAULT_USERNAME: "admin"
  EMQX_DASHBOARD__DEFAULT_PASSWORD: "public"

service:
  type: LoadBalancer
  loadBalancerIP: 192.168.205.202
  labels:
    release: prometheus-stack

metrics:
  enabled: true
  type: prometheus

# Setting PodDisruptionBudget.
# https://kubernetes.io/docs/tasks/run-application/configure-pdb
pdb:
  enabled: true
  maxUnavailable: 1
